<!DOCTYPE html>
<html lang="en">
<head>
    <title>WarsawJS Slides: Template</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=792, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="themes/warsawjs/styles/ribbon-theme.css">
    <link rel="stylesheet" href="themes/warsawjs/styles/warsawjs-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">

    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/languages/javascript.min.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>

    <script>
      document.addEventListener('keypress', function (e) {
        if (e.keyCode === 97) {
          var style = document.querySelector('.full .background > div').style

          if (!style.background) {
            style.background = "none"
          } else {
            style.background = ""
          }
        }
      })
    </script>
</head>
<body class="list">
    <header class="caption">
        <h1>WarsawJS Slides: Template</h1>
        <p>We talk about JavaScript. Each month in Warsaw, Poland.</p>
    </header>

    <div class="background">
        <div></div>
    </div>

    <section class="slide front-page">
        <div>
            <div class="logo">
                <!-- Logo WarsawJS -->
                <img src="pictures/logo/logo-light.png">
            </div>
            <div class="details">
                <!-- 1. Avatar -->
                <img src="pictures/me.jpg" alt="Speaker" style="width: 200px; height: 200px" />

                <!-- 2. Speaker -->
                <h2>Artur Siery</h2>

                <!-- 3. Presentation title -->
                <h2><strong>Node Like A Pro<strong></h2>

                <!-- 4. Presentation date -->
                <h2>2016-06-08</h2>

                <!-- 5. Contact the speaker -->
                <h2><a href="http://twitter.com/dotintegral">@dotintegral</a></h2>
            </div>
        </div>
    </section>


    <section class="slide myslide">
        <div>
            <h2>Motivation</h2>
            <p>
              I found myself doing all those repetetive actions and facing the
              same problems with Node for years.
            </p>
            <p>
              Turns out, most of them are easly solved by existing tools.
            </p>
            <p>
              I didn't know that such tools exists... So I haven't search for them.
            </p>
        </div>
    </section>



    <section class="slide myslide">
        <div>
            <h2>The tools</h2>
            <ul>
              <li>nodemon</li>
              <li>node-inspector & iron-node</li>
              <li>nvm</li>
              <li>pm2</li>
              <li>http-proxy <span class="gray">(some code, yay!)</span></li>
            </ul>
        </div>
    </section>




    <section class="slide myslide">
        <div>
          <h2 class="chapter">nodemon</h2>
        </div>
    </section>




    <section class="slide myslide">
        <div>
            <h2>Creating new project</h2>
            <ul>
              <li>Git init, npm install ...</li>
              <li>Open Terminal Emulator / Console</li>
              <li>Open IDE</li>
              <li>Start typing</li>
            </ul>
        </div>
    </section>



    <section class="slide myslide">
        <div>
            <img src="pictures/nodemon-seq-1.png" class="seq-img"/>
        </div>
    </section>



    <section class="slide myslide">
        <div>
            <img src="pictures/nodemon-seq-2.png" class="seq-img"/>
        </div>
    </section>



    <section class="slide myslide">
        <div>
            <img src="pictures/nodemon-seq-3.png" class="seq-img"/>
        </div>
    </section>



    <section class="slide myslide">
        <div>
            <img src="pictures/nodemon-seq-4.png" class="seq-img"/>
        </div>
    </section>



    <section class="slide myslide">
        <div>
            <h2>I had a dream</h2>
            <div>If only there was a hot reloading module for any node script...</div>
        </div>
    </section>



    <section class="slide myslide">
        <div>
            <h2>nodemon</h2>
            <ul>
              <li>nodemon works like an alternative node launcher</li>
              <li>it monitors changes made to directories and automatically restarts your app</li>
            </ul>
        </div>
    </section>




    <section class="slide myslide">
        <div>
          <h2>nodemon usage</h2>
           <pre><code class="javascript">$ npm install -g nodemon

// $ node myapp.js
$ nodemon myapp.js
</code></pre>
        </div>
    </section>




    <section class="slide myslide">
        <div>
          <h2>nodemon usage</h2>
           <pre><code class="javascript">// run with arguments
$ nodemon myapp.js --port 80

// ignore files or directories, that can change
$ nodemon --ignore tests/ myapp.js

// watch only specyfic directories
$ nodemon --watch app/ --watch node_modules/ myapp.js
</code></pre>
        </div>
    </section>




    <section class="slide myslide">
        <div>
          <h2>nodemon usage</h2>
           <pre><code class="javascript">// run non-node scripts
$ nodemon --exec "python -v" ./myapp.py

// delay the restarts by 3 seconds
$ nodemon --delay 3 myapp.js
</code></pre>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2 class="chapter-3">node-inspector <br /> & <br /> iron-node</h2>
        </div>
    </section>




    <section class="slide myslide">
        <div>
            <h2>How to debug node application?</h2>
            <ul>
              <li>console.log anyone?</li>
              <li>Where are the Chrome's DevTools (or Firefox's, or Edge's...)</li>
            </ul>
        </div>
    </section>




    <section class="slide myslide">
        <div>
          <h2>Well... here they are</h2>
          <div class="center">
            <img class="node-inspector" src="pictures/node-inspector.png" />
          </div>
        </div>
    </section>




    <section class="slide myslide">
        <div>
          <h2>Simple usage</h2>
          <pre><code class="javascript">$ npm install -g node-inspector // duh...

$ node-debug myapp.js
</code></pre>
          <div>
            Automatycally launches your browser with the inspector app.
          </div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Cool features</h2>
            <ul>
              <li>All of Chrome's DevTools features!</li>
              <li>Uses WebSockets for communication</li>
              <li>Remote debugging</li>
              <li>Live edit of running code with option to save on file system</li>
            </ul>
        </div>
    </section>




    <section class="slide myslide">
        <div>
          <h2>Advanced stuff</h2>
          <pre><code class="javascript">// create web-inspector server
$ node-inspector
// use node's native debug protocol to connect
$ node --debug myapp.js

// save live edit
$ node-debug --save-live-edit myapp.js
</code></pre>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>iron-node</h2>
            <ul>
              <li>Basically the same... but a bit different</li>
              <li>It's more of a standalone, desktop debugger</li>
              <li>Comes with it's own version of node</li>
              <li>Themable</li>
            </ul>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>iron-node</h2>
          <div class="center">
            <img src="pictures/iron-node.jpg" />
          </div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2 class="chapter">nvm</h2>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Backwards compability</h2>
          <ul>
            <li>In theory, Node's API is backward compatible... at least most of it</li>
            <li>What to do when working on project that requires diffrent version of node?
              <ul>
                <li>Uninstall</li>
                <li>Download</li>
                <li>Install</li>
              <ul>
            </li>
          </ul>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>nvm</h2>
          <div>NVM stands for Node Version Manager</div>
          <div>Allows for easy version change</div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Global usage</h2>
          <pre><code class="javascript">// install any version
$ nvm install 0.12.9

// switch to that version
$ nvm use 0.12.9
</code></pre>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Local usage</h2>
          <pre><code class="javascript">// run your app in different version
$ nvm run 0.12.9 myapp.js

// run shell command with different node version
$ nvm exec 0.12.9 node myapp.js
</code></pre>
        </div>
    </section>






    <section class="slide myslide">
        <div>
          <h2>Issues</h2>
          <div>Some other node launcher-like programms (such as nodemon or node-inspector)
            sometimes don't get along with nvm.</div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2 class="chapter">pm2</h2>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Lets release our app to production</h2>
          <div>Alright, our app is ready to be deployed on production enviroment. </div>
          <div>We run it, everything is working.</div>
          <div>After a few hours...</div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>crash!</h2>
          <div class="center">
            <img src="pictures/node-crash.jpg" />
          </div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>What can we do?</h2>
            <ul>
              <li>Restart the app!</li>
              <li>Debug</li>
              <li>Deploy hotfix</li>
              <li>Test more</li>
              <li>Add more try and catch statements</li>
              <li>Hire an QA</li>
              <li>...</li>
            </ul>
        </div>
    </section>






    <section class="slide myslide">
        <div>
          <h2>... or use PM2</h2>
            <ul>
              <li>PM2 is node process manager</li>
              <li>Will automatically restart any application that crashed</li>
              <li>Can launch multiple instances of a single app and seamlesly route the
                traffic (app needs to be stateless)</li>
              <li>Can restart instance when exceeds given memory limit</li>
              <li>Can log STDOUT and STDERR to files</li>
            </ul>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Usage</h2>
          <pre><code class="javascript">// run your app
$ pm2 start myapp.js

// run in 5 instances
$ pm2 start myapp.js -i 5

// restart after exceeding 1GB
$ pm2 start myapp.js --max-memory-restart 1024M
</code></pre>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>See what's going on</h2>
          <pre><code class="javascript">pm2 list
</code></pre>
          <div class="center">
            <img class="pm2-list" src="pictures/pm2-list.png" />
          </div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Realtime monitoring</h2>
          <pre><code class="javascript">pm2 monit
</code></pre>
          <div class="center">
            <img class="pm2-monit" src="pictures/pm2-monit.png" />
          </div>
        </div>
    </section>






    <section class="slide myslide">
        <div>
          <h2>More features</h2>
            <ul>
              <li>Watch directory and restart on changes (like nodemon)</li>
              <li>Programmatic API</li>
            </ul>
        </div>
    </section>






    <section class="slide myslide">
        <div>
          <h2 class="chapter">node-proxy</h2>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>Multiple applications</h2>
          <ul>
            <li>We can develop application</li>
            <li>We can deploy it to production</li>
            <li>But what about deploying another app?
              <ul>
                <li>Only one port 80!</li>
              </ul>
            </li>
          </ul>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>The usual solution</h2>
          <ul>
            <li>Run applications on different ports</li>
            <li>Or maybe use Docker containers</li>
            <li>Routing?
              <ul>
                <li>Apache</li>
                <li>Nginx</li>
                <li>...</li>
              </ul>
            </li>
          </ul>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>For the pure sake of</h2>
          <div class="center">
            <img src="pictures/node-all.jpg" />
          </div>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>http-proxy</h2>
          <ul>
            <li>Allows to proxy requests</li>
            <li>Supports both HTTP and HTTPS</li>
            <li>Intercept errors</li>
            <li>Great for routing</li>
          </ul>
        </div>
    </section>





    <section class="slide myslide">
        <div>
          <h2>The code</h2>
          <pre><code class="javascript">var httpProxy = require('http-proxy');
httpProxy.createServer({
  hostnameOnly: true,
  router: {
    'domain1.com': '127.0.0.1:3001',
    'domain2.com': '127.0.0.1:3002'
  }
}).listen(80);
</code></pre>
        </div>
    </section>




    <section class="slide myslide">
        <div class="end">
          <img src="pictures/beer.jpg" class="beer" />
          <h2>Thanks!</h2>
        </div>
    </section>




    <p class="badge"><a href="https://github.com/warsawjs/slides-template">Fork me on Github</a></p>
    <p class="badge badge-left"><a href="#">Fullscreen</a></p>

    <div class="progress">
        <div></div>
    </div>

    <script src="vendor/gamepad/gamepad.js"></script>
    <script src="vendor/shower/shower.js"></script>
    <script src="vendor/shower/shower.gamepad.js"></script>
    <script src="themes/warsawjs/scripts/fullscreen.js"></script>
</body>
</html>
